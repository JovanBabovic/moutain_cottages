<div class="modern-auth-page">
  <div class="auth-background"></div>

  <div class="auth-container">
    <div class="auth-header">
      <div class="brand-logo">🔑</div>
      <h1 class="auth-title">Change Password</h1>
      <p class="auth-subtitle">Update your account password securely</p>
    </div>

    <form (ngSubmit)="onSubmit()" #passwordForm="ngForm" class="auth-form">
      <div class="form-group">
        <label for="username">Username:</label>
        <input
          type="text"
          id="username"
          name="username"
          [(ngModel)]="username"
          required
        />
      </div>

      <div class="form-group">
        <label for="oldPassword">Old Password:</label>
        <input
          type="password"
          id="oldPassword"
          name="oldPassword"
          [(ngModel)]="oldPassword"
          required
        />
      </div>

      <div class="form-group">
        <label for="newPassword">New Password:</label>
        <input
          type="password"
          id="newPassword"
          name="newPassword"
          [(ngModel)]="newPassword"
          (input)="onPasswordInput()"
          required
          minlength="6"
          maxlength="10"
        />
        <small
          class="field-hint"
          *ngIf="!showPasswordErrors || passwordErrors.length === 0"
        >
          6-10 characters, must begin with a letter, at least 1 uppercase, 3
          lowercase, 1 digit, 1 special character
        </small>
        <div
          class="password-validation-errors"
          *ngIf="showPasswordErrors && passwordErrors.length > 0"
        >
          <div class="validation-error" *ngFor="let error of passwordErrors">
            ❌ {{ error }}
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmNewPassword">Repeat New Password:</label>
        <input
          type="password"
          id="confirmNewPassword"
          name="confirmNewPassword"
          [(ngModel)]="confirmNewPassword"
          (input)="onConfirmPasswordInput()"
          required
        />
        <div class="password-validation-errors" *ngIf="showPasswordMismatch">
          <div class="validation-error">❌ Passwords do not match</div>
        </div>
      </div>

      <div class="success-message" *ngIf="successMessage">
        {{ successMessage }}
      </div>

      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <button type="submit" [disabled]="isLoading || !passwordForm.form.valid">
        {{ isLoading ? "Changing..." : "Change Password" }}
      </button>
    </form>

    <div class="auth-links">
      <div class="link-item">
        <a routerLink="/login" class="auth-link">
          <span class="link-icon">🔙</span>
          Back to Login
        </a>
      </div>
      <div class="link-item">
        <a routerLink="/" class="auth-link secondary">
          <span class="link-icon">🏠</span>
          Back to Home
        </a>
      </div>
    </div>
  </div>
</div>

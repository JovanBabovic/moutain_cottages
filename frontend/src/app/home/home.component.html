<div class="home-container">
  <header class="home-header">
    <h1>Mountain Cottage</h1>
    <p>Discover Your Perfect Mountain Retreat</p>
    <div class="header-links">
      <a routerLink="/login" class="btn btn-primary">Login</a>
      <a routerLink="/register" class="btn btn-secondary">Register</a>
      <a routerLink="/change-password" class="btn btn-link">Change Password</a>
    </div>
  </header>

  <!-- Statistics Section -->
  <section class="statistics-section">
    <h2>Platform Statistics</h2>
    <div *ngIf="isLoadingStats" class="loading">Loading statistics...</div>
    <div *ngIf="!isLoadingStats && statistics" class="stats-grid">
      <div class="stat-card">
        <div class="stat-number">{{ statistics.totalCottages }}</div>
        <div class="stat-label">Total Cottages</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ statistics.totalOwners }}</div>
        <div class="stat-label">Registered Owners</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ statistics.totalTourists }}</div>
        <div class="stat-label">Registered Tourists</div>
      </div>
    </div>

    <div *ngIf="!isLoadingStats && statistics" class="reservation-stats">
      <h3>Recent Reservations</h3>
      <div class="reservation-grid">
        <div class="reservation-card">
          <div class="res-number">
            {{ statistics.reservations.last24Hours }}
          </div>
          <div class="res-label">Last 24 Hours</div>
        </div>
        <div class="reservation-card">
          <div class="res-number">{{ statistics.reservations.last7Days }}</div>
          <div class="res-label">Last 7 Days</div>
        </div>
        <div class="reservation-card">
          <div class="res-number">{{ statistics.reservations.last30Days }}</div>
          <div class="res-label">Last 30 Days</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Cottages Section -->
  <section class="cottages-section">
    <h2>Available Cottages</h2>

    <!-- Search and Filter -->
    <div class="search-box">
      <input
        type="text"
        [(ngModel)]="searchName"
        placeholder="Search by name..."
        class="search-input"
      />
      <input
        type="text"
        [(ngModel)]="searchLocation"
        placeholder="Search by location..."
        class="search-input"
      />
      <button (click)="onSearch()" class="search-btn">Search</button>
    </div>

    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

    <div *ngIf="isLoadingCottages" class="loading">Loading cottages...</div>

    <div *ngIf="!isLoadingCottages && cottages.length === 0" class="no-data">
      No cottages found.
    </div>

    <!-- Cottages Table -->
    <table
      *ngIf="!isLoadingCottages && cottages.length > 0"
      class="cottages-table"
    >
      <thead>
        <tr>
          <th (click)="onSort('name')" class="sortable">
            Name {{ getSortIcon("name") }}
          </th>
          <th (click)="onSort('location')" class="sortable">
            Location {{ getSortIcon("location") }}
          </th>
          <th>Description</th>
          <th>Price/Night</th>
          <th>Capacity</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cottage of cottages">
          <td>{{ cottage.name }}</td>
          <td>{{ cottage.location }}</td>
          <td>{{ cottage.description || "N/A" }}</td>
          <td>{{ cottage.pricePerNight | currency : "EUR" }}</td>
          <td>{{ cottage.capacity }} guests</td>
        </tr>
      </tbody>
    </table>
  </section>
</div>
